<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link id="favicon" rel="icon" href="%PUBLIC_URL%/programming.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Aditya Swami — Full Stack Developer. Fantasy portfolio." />
    <meta property="og:title" content="Aditya Swami | Portfolio" />
    <meta property="og:image" content="%PUBLIC_URL%/programming.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <title>Aditya Swami | Portfolio</title>

    <!-- ✅ Google Analytics (move to top for reliability) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-2Y1DMTYY68" crossorigin="anonymous"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){ dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', 'G-2Y1DMTYY68', { send_page_view: true });
    </script>
    <!-- ✅ End Google Analytics -->

    <style>
      html,body{height:100%;margin:0;background:#071026;color:#fff;font-family:system-ui,-apple-system,Segoe UI,Roboto}
      #faviconCanvas{width:0;height:0;opacity:0;position:absolute;pointer-events:none}
      @media (prefers-reduced-motion: reduce){:root{--noanim:1}}
    </style>

    <script>
      (function () {
        const titles = ["Aditya Swami | Portfolio","Full Stack Developer","React · Spring Boot","Creative Problem Solver"];
        const typeMs = 60, pause = 1100;
        const reduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        if (!reduced) {
          (async function loop() {
            let i = 0;
            while (1) {
              const phrase = titles[i];
              for (let k = 1; k <= phrase.length; k++) { document.title = phrase.slice(0,k)+" ▌"; await new Promise(r=>setTimeout(r,typeMs)); }
              document.title = phrase; await new Promise(r=>setTimeout(r,pause));
              for (let k = phrase.length; k >= 0; k--) { document.title = phrase.slice(0,k)+(k? " ▌":""); await new Promise(r=>setTimeout(r,Math.max(18,typeMs/2))); }
              i = (i+1) % titles.length;
            }
          })();
        } else {
          document.title = titles[0];
        }

        const link = document.getElementById('favicon');
        const canvas = document.createElement('canvas'); canvas.id='faviconCanvas'; canvas.width=64; canvas.height=64;
        const ctx = canvas.getContext('2d'); document.head.appendChild(canvas);
        const img = new Image(); img.src = "%PUBLIC_URL%/programming.png"; img.crossOrigin = 'anonymous';
        let a = 0, loaded=false;
        img.onload = ()=>loaded=true;
        function frame(){
          ctx.clearRect(0,0,64,64);
          const g = ctx.createRadialGradient(32,30,6,32,32,40);
          g.addColorStop(0,'rgba(255,255,255,0.9)'); g.addColorStop(0.2,'rgba(155,92,246,0.25)');
          g.addColorStop(1,'rgba(96,165,250,0.06)');
          ctx.fillStyle=g; ctx.beginPath(); ctx.arc(32,32,28,0,Math.PI*2); ctx.fill();
          ctx.save(); ctx.translate(32,32); ctx.rotate(a);
          if(loaded) ctx.drawImage(img,-22,-22,44,44); else {
            const f = ctx.createLinearGradient(-16,-16,16,16);
            f.addColorStop(0,'rgba(155,92,246,0.6)'); f.addColorStop(1,'rgba(96,165,250,0.5)');
            ctx.fillStyle=f; ctx.beginPath(); ctx.arc(0,0,14,0,Math.PI*2); ctx.fill();
          }
          ctx.restore();
          ctx.beginPath(); ctx.ellipse(28,26,14,6, -0.4,0,Math.PI*2); ctx.fillStyle='rgba(255,255,255,0.12)'; ctx.fill();
          ctx.lineWidth=1.5; ctx.strokeStyle='rgba(255,255,255,0.06)'; ctx.beginPath(); ctx.arc(32,32,27,0,Math.PI*2); ctx.stroke();
          link.href = canvas.toDataURL('image/png');
          a += 0.014;
        }
        if (!reduced) {
          frame(); const id = setInterval(frame,80);
          window.addEventListener('beforeunload',()=>clearInterval(id),{passive:true});
        } else {
          link.href = "%PUBLIC_URL%/programming.png";
        }
      })();
    </script>

  </head>
  <body>
    <noscript>You need JavaScript to run this app.</noscript>
    <div id="root"></div>
  </body>
</html>
